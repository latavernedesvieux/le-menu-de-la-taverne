<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Menu de la Taverne ‚Äî Jeux pr√™ts</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=MedievalSharp&family=Inter:wght@300;400;600&display=swap');

body {
  font-family: "Inter", sans-serif;
  padding: 2rem;
  background: url('https://images.unsplash.com/photo-1503589713263-327abf71f4ff?auto=format&fit=crop&w=1600&q=80') center/cover no-repeat fixed;
  position: relative;
  color: #3b2b1f;
  overflow-x: hidden;
}
body::before {
  content:"";
  position:fixed;
  inset:0;
  background: rgba(60,40,20,0.35);
  z-index:-1;
  pointer-events:none;
}
.page {
  max-width: 1100px;
  margin: 0 auto;
  background: rgba(245,235,210,0.85);
  border: 6px solid rgba(60,40,20,0.6);
  border-radius: 16px;
  box-shadow: 0 15px 35px rgba(0,0,0,0.5);
  padding: 28px;
  position: relative;
  overflow: hidden;
  z-index:1;
}
.title {
  font-family: "MedievalSharp", serif;
  font-size: 2.6rem;
  color:#5b3a1a;
}
.subtitle{ 
  color:#6b4b2f; 
  margin-top:-4px; 
  font-size:1.1rem;
}
.card {
  background: linear-gradient(180deg, #fff5e0 0%, #f2e3c0 100%);
  border-radius: 12px;
  border: 2px solid rgba(60,40,20,0.3);
  display: flex;
  gap:1rem;
  padding:1rem;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  box-shadow: 0 8px 20px rgba(0,0,0,0.25);
  position: relative;
  z-index:1;
}
.card:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 0 12px 30px rgba(0,0,0,0.35);
}
.jaquette { 
  width:100%; 
  height:180px; 
  object-fit:cover; 
  border-radius:6px; 
  border:1px solid rgba(60,40,20,0.2); 
}
.badge-available{ background:#3c7d1f; color:white; padding:.25rem .55rem; border-radius:999px; font-weight:600; font-size:.85rem;}
.badge-reserved{ background:#d97706; color:white; padding:.25rem .55rem; border-radius:999px; font-weight:600; font-size:.85rem;}
.badge-soon{ background:#6b4b2f; color:white; padding:.25rem .55rem; border-radius:999px; font-weight:600; font-size:.85rem;}
.muted{ color:#5b4b3f; font-size:.95rem; }
.popup {
  display:none;
  position:fixed;
  inset:0;
  background: rgba(0,0,0,0.6);
  z-index:50;
  align-items:center;
  justify-content:center;
}
.popup .popup-content {
  background: #fff5e0;
  padding:2rem;
  border-radius:12px;
  max-width:400px;
  width:90%;
  text-align:center;
  box-shadow: 0 8px 20px rgba(0,0,0,0.5);
  position: relative;
}
.popup input {
  width:80%;
  padding:0.5rem;
  border:1px solid #3b2b1f;
  border-radius:6px;
  margin-top:1rem;
}
.popup button {
  margin-top:1rem;
  padding:0.5rem 1rem;
  background:#3c7d1f;
  color:white;
  border-radius:6px;
  font-weight:600;
}
#add-game-btn {
  font-size:1.1rem;
  padding:0.75rem 1.5rem;
  background:#d97706;
}
.popup .close-popup {
  position:absolute;
  top:0.5rem;
  right:0.5rem;
  cursor:pointer;
  font-weight:bold;
  color:#3b2b1f;
}
</style>
</head>
<body>
<div class="page">
  <header class="mb-6">
    <h1 class="title">Le Menu de la Taverne</h1>
  </header>
  <p class="subtitle mb-6">üçª La Taverne des Jeux ‚Äî D√©couvrez, votez, et sugg√©rez les jeux √† ajouter √† notre biblioth√®que !</p>

  <section class="grid grid-cols-1 md:grid-cols-2 gap-5" id="games-container"></section>

  <h2 class="title mt-10 text-2xl">Jeux souhait√©s par la communaut√©</h2>
  <section class="grid grid-cols-1 md:grid-cols-2 gap-5 mt-4" id="wish-container"></section>

  <h2 class="title mt-10 text-2xl">Ajouter un jeu √† sugg√©rer</h2>
  <button id="add-game-btn" class="mt-2 rounded-lg hover:bg-orange-700 transition">Ajouter un jeu √† sugg√©rer</button>

  <footer class="mt-8 text-sm muted">
    <p>Descriptions et images inspir√©es des fiches Steam officielles. ¬© Valve Corporation.</p>
  </footer>
</div>

<!-- Popup vote -->
<div id="vote-popup" class="popup flex">
  <div class="popup-content">
    <span class="close-popup">&times;</span>
    <h3 class="text-xl font-semibold">Entrer votre pseudo</h3>
    <input type="text" id="voter-pseudo" placeholder="Votre pseudo" required>
    <button id="submit-vote">Envoyer le vote</button>
    <p id="vote-msg" class="mt-2 text-green-700 font-semibold"></p>
  </div>
</div>

<!-- Popup suggestion -->
<div id="suggest-popup" class="popup flex">
  <div class="popup-content">
    <span class="close-popup-suggest">&times;</span>
    <h3 class="text-xl font-semibold">Sugg√©rer un jeu</h3>
    <input type="text" id="suggest-pseudo" placeholder="Votre pseudo" required>
    <input type="text" id="suggest-link" placeholder="Lien du jeu" required>
    <button id="submit-suggest">Envoyer la suggestion</button>
    <p id="suggest-msg" class="mt-2 text-green-700 font-semibold"></p>
  </div>
</div>

<script id="game-data" type="application/json">
[{"title":"Voidtrain","appid":"1159690","status":"disponible","note":"","steam":"https://store.steampowered.com/app/1159690/Voidtrain/","desc":"Devenez membre d'√©quipage d'un train interdimensionnel..."},
{"title":"Sons of the Forest","appid":"1326470","status":"disponible","note":"","steam":"https://store.steampowered.com/app/1326470/Sons_Of_The_Forest/","desc":"Survivre dans un open-world survival-horror, seul ou en coop."},
{"title":"Icarus","appid":"1149460","status":"disponible","note":"","steam":"https://store.steampowered.com/app/1149460/ICARUS/","desc":"Survival ax√© sur des missions et un monde persistant."},
{"title":"Abiotic Factor","appid":"427410","status":"disponible","note":"","steam":"https://store.steampowered.com/app/427410/Abiotic_Factor/","desc":"Survie et crafting dans une installation souterraine."},
{"title":"Gray Zone Warfare","appid":"2479810","status":"disponible","note":"","steam":"https://store.steampowered.com/app/2479810/Gray_Zone_Warfare/","desc":"Hardcore tactical FPS dans les jungles d‚ÄôAsie du Sud-Est."},
{"title":"Remnant 2","appid":"1282100","status":"disponible","note":"","steam":"https://store.steampowered.com/app/1282100/REMNANT_II/","desc":"Affrontez des cr√©atures et boss divins dans un monde terrifiant."},
{"title":"Ready or Not","appid":"1144200","status":"disponible","note":"","steam":"https://store.steampowered.com/app/1144200/Ready_or_Not/","desc":"FPS tactique intense : incarnez une unit√© SWAT moderne."},
{"title":"SnowRunner","appid":"1465360","status":"disponible","note":"r√©serv√© jusqu'au 25/10/2025","steam":"https://store.steampowered.com/app/1465360/SnowRunner/","desc":"Simulation tout-terrain avec missions et v√©hicules puissants."},
{"title":"Peak","appid":"3527290","status":"r√©serv√©","note":"Votes:2","steam":"https://store.steampowered.com/app/3527290/PEAK/","desc":"A survival crafting game set in frozen peaks."},
{"title":"Lens Island","appid":"1335830","status":"r√©serv√©","note":"Votes:2","steam":"https://store.steampowered.com/app/1335830/Lens_Island/","desc":"Explorez une √Æle myst√©rieuse et survivez aux dangers."},
{"title":"Dying Light 2","appid":"534380","status":"prochainement","note":"Votes:1","steam":"https://store.steampowered.com/app/534380/Dying_Light_2_Stay_Human/","desc":"Un monde ouvert o√π vos choix influencent la survie."},
{"title":"Aloft","appid":"1660080","status":"prochainement","note":"Votes:2","steam":"https://store.steampowered.com/app/1660080/Aloft/","desc":"Volez et explorez un monde a√©rien ouvert."},
{"title":"Enshrouded","appid":"2698780","status":"prochainement","note":"Votes:1","steam":"https://store.steampowered.com/app/1203620/Enshrouded/","desc":"Survival coop√©ratif dans un vaste monde brumeux."},
{"title":"No Man's Sky","appid":"275850","status":"prochainement","note":"Votes:1","steam":"https://store.steampowered.com/app/275850/No_Mans_Sky/","desc":"Exploration et survie dans un univers infini."},
{"title":"Baldur's Gate 3","appid":"1086940","status":"prochainement","note":"Votes:1","steam":"https://store.steampowered.com/app/1086940/Baldurs_Gate_3/","desc":"Constituez votre groupe et retournez aux Royaumes Oubli√©s."},
{"title":"RV There Yet","appid":"3949040","status":"prochainement","note":"Votes:1","steam":"https://store.steampowered.com/app/3949040/RV_There_Yet/","desc":"Jeu coop√©ratif de conduite d‚Äôune caravane jusqu‚Äô√† la maison."},
{"title":"VEIN","appid":"1857950","status":"prochainement","note":"Votes:1","steam":"https://store.steampowered.com/app/1857950/VEIN/","desc":"Jeu de survie multijoueur en univers post-apocalyptique."},
{"title":"Hogwarts Legacy","appid":"990080","status":"prochainement","note":"Votes:0","steam":"https://store.steampowered.com/app/990080/Hogwarts_Legacy__LHritage_de_Poudlard/","desc":"Hogwarts Legacy¬†: L'H√©ritage de Poudlard est un RPG d'action-aventure immersif en monde ouvert."}]
</script>

<script>
const data = JSON.parse(document.getElementById("game-data").textContent);
const container = document.getElementById("games-container");
const wishContainer = document.getElementById("wish-container");
function steamHeader(appid){ return `https://cdn.cloudflare.steamstatic.com/steam/apps/${appid}/header.jpg`; }

// Popups
const votePopup = document.getElementById("vote-popup");
const suggestPopup = document.getElementById("suggest-popup");
votePopup.style.display="none";
suggestPopup.style.display="none";

const pseudoInput = document.getElementById("voter-pseudo");
const submitVote = document.getElementById("submit-vote");
const voteMsg = document.getElementById("vote-msg");
let currentGame = null;

document.querySelector(".close-popup").addEventListener("click", ()=>{
  votePopup.style.display="none";
  pseudoInput.value="";
  voteMsg.textContent="";
});

const suggestBtn = document.getElementById("add-game-btn");
const suggestClose = document.querySelector(".close-popup-suggest");
const suggestPseudo = document.getElementById("suggest-pseudo");
const suggestLink = document.getElementById("suggest-link");
const submitSuggest = document.getElementById("submit-suggest");
const suggestMsg = document.getElementById("suggest-msg");

suggestBtn.addEventListener("click", ()=>{ suggestPopup.style.display="flex"; });
suggestClose.addEventListener("click", ()=>{
  suggestPopup.style.display="none";
  suggestPseudo.value="";
  suggestLink.value="";
  suggestMsg.textContent="";
});

// --- Cr√©ation des cartes ---
data.forEach(g=>{
  const card=document.createElement("article");
  card.className="card";

  const img=document.createElement("img");
  img.src=steamHeader(g.appid);
  img.alt=g.title+" jaquette";
  img.className="jaquette w-1/3";

  const body=document.createElement("div");
  body.className="w-2/3";

  const title=document.createElement("h3");
  title.className="font-semibold text-xl";
  title.textContent=g.title;

  const badge=document.createElement("span");
  badge.classList.add("ml-3");
  if(g.status==="disponible") badge.innerHTML='<span class="badge-available">Disponible</span>';
  else if(g.status==="r√©serv√©") badge.innerHTML='<span class="badge-reserved">R√©serv√©</span>';
  else badge.innerHTML='<span class="badge-soon">Prochainement</span>';

  const desc=document.createElement("p");
  desc.className="mt-2 text-sm";
  desc.textContent=g.desc;

  const meta=document.createElement("div");
  meta.className="mt-3 text-xs muted flex items-center gap-3";
  const steam=document.createElement("a");
  steam.href=g.steam; 
  steam.target="_blank"; 
  steam.rel="noopener"; 
  steam.textContent="Fiche Steam"; 
  steam.className="underline";
  const note=document.createElement("span");
  if(g.note) note.textContent=" ‚Ä¢ "+g.note;
  meta.append(steam,note);

  body.append(title,badge,desc,meta);

  // Bouton vote
  const voteButton = document.createElement("button");
  voteButton.className="mt-2 bg-amber-700 text-white px-3 py-1 rounded-lg hover:bg-amber-800 transition";
  voteButton.textContent="üó≥Ô∏è Voter pour ce jeu";
  voteButton.addEventListener("click", ()=>{
    currentGame = g;
    votePopup.style.display="flex";
    pseudoInput.focus();
  });
  body.append(voteButton);

  card.append(img,body);

  if(g.status==="disponible"||g.status==="r√©serv√©") container.appendChild(card);
  else wishContainer.appendChild(card);
});

// --- Envoi du vote ---
submitVote.addEventListener("click", async ()=>{
  const pseudo = pseudoInput.value.trim();
  if(!pseudo){
    voteMsg.textContent="‚ö†Ô∏è Veuillez entrer un pseudo !";
    return;
  }
  voteMsg.textContent="‚è≥ Envoi du vote...";
  submitVote.disabled = true;
  try{
    await fetch("https://formspree.io/f/manlywdn",{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({
        type:"vote",
        jeu: currentGame.title,
        appid: currentGame.appid,
        pseudo: pseudo,
        date: new Date().toISOString()
      })
    });
    voteMsg.textContent="‚úÖ Vote enregistr√© !";
    submitVote.disabled = false;
  }catch(e){
    voteMsg.textContent="‚ùå Erreur, r√©essayez";
    submitVote.disabled=false;
  }
});

// --- Envoi suggestion ---
submitSuggest.addEventListener("click", async ()=>{
  const pseudo = suggestPseudo.value.trim();
  const link = suggestLink.value.trim();
  if(!pseudo || !link){
    suggestMsg.textContent="‚ö†Ô∏è Tous les champs sont obligatoires !";
    return;
  }
  suggestMsg.textContent="‚è≥ Envoi...";
  submitSuggest.disabled=true;
  try{
    await fetch("https://formspree.io/f/manlywdn",{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({
        type:"suggestion",
        pseudo: pseudo,
        lien: link,
        date: new Date().toISOString()
      })
    });
    suggestMsg.textContent="‚úÖ Suggestion envoy√©e !";
    submitSuggest.disabled=false;
  }catch(e){
    suggestMsg.textContent="‚ùå Erreur, r√©essayez";
    submitSuggest.disabled=false;
  }
});
</script>
</body>
</html>
